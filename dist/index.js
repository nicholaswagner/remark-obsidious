var _=["avif","bmp","gif","jpeg","jpg","png","svg","webp"],u=null,z=e=>(u||(u=e),N),P=e=>u&&u.files[e]||null,K=e=>u?P(u.idsByWebPath[e]):null,X=e=>u?P(u.idsByLabelSlug[e]):null,H=()=>u?Object.values(u.files):[],M=()=>u?u.imageIds.map(P).filter(e=>e!==null):[],q=()=>u?u.fileTree:[],Y=e=>(u?u.idsByExtension[e]||[]:[]).map(P).filter(i=>i!==null),N={initialize:z,getAllFiles:H,getAllImageFiles:M,getFileForId:P,getFileForLabelSlug:X,getFileForWebPathSlug:K,getFilesByExtension:Y,getFileTree:q,...u||{}};var I=e=>e.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/[^a-z0-9\/]+/g,"-").replace(/_+/g,"_").replace(/^_+|_+$/g,""),G=(e,t)=>I(t==="md"?e.replace(/\.md$/,""):e);function J(e){for(var t=0,i,r=0,s=e.length;s>=4;++r,s-=4)i=e.charCodeAt(r)&255|(e.charCodeAt(++r)&255)<<8|(e.charCodeAt(++r)&255)<<16|(e.charCodeAt(++r)&255)<<24,i=(i&65535)*1540483477+((i>>>16)*59797<<16),i^=i>>>24,t=(i&65535)*1540483477+((i>>>16)*59797<<16)^(t&65535)*1540483477+((t>>>16)*59797<<16);switch(s){case 3:t^=(e.charCodeAt(r+2)&255)<<16;case 2:t^=(e.charCodeAt(r+1)&255)<<8;case 1:t^=e.charCodeAt(r)&255,t=(t&65535)*1540483477+((t>>>16)*59797<<16)}return t^=t>>>13,t=(t&65535)*1540483477+((t>>>16)*59797<<16),((t^t>>>15)>>>0).toString(36)}var V=function(e){if(e==null)return te;if(typeof e=="function")return v(e);if(typeof e=="object")return Array.isArray(e)?Q(e):Z(e);if(typeof e=="string")return ee(e);throw new Error("Expected function, string, or object as test")};function Q(e){let t=[],i=-1;for(;++i<e.length;)t[i]=V(e[i]);return v(r);function r(...s){let a=-1;for(;++a<t.length;)if(t[a].apply(this,s))return!0;return!1}}function Z(e){let t=e;return v(i);function i(r){let s=r,a;for(a in e)if(s[a]!==t[a])return!1;return!0}}function ee(e){return v(t);function t(i){return i&&i.type===e}}function v(e){return t;function t(i,r,s){return!!(ie(i)&&e.call(this,i,typeof r=="number"?r:void 0,s||void 0))}}function te(){return!0}function ie(e){return e!==null&&typeof e=="object"&&"type"in e}var w=[],E=!0,k=!1,R="skip";function A(e,t,i,r){let s;typeof t=="function"&&typeof i!="function"?(r=i,i=t):s=t;let a=V(s),n=r?-1:1;c(e,void 0,[])();function c(o,p,g){let d=o&&typeof o=="object"?o:{};if(typeof d.type=="string"){let l=typeof d.tagName=="string"?d.tagName:typeof d.name=="string"?d.name:void 0;Object.defineProperty(O,"name",{value:"node ("+(o.type+(l?"<"+l+">":""))+")"})}return O;function O(){let l=w,h,f,m;if((!t||a(o,p,g[g.length-1]||void 0))&&(l=se(i(o,g)),l[0]===k))return l;if("children"in o&&o.children){let b=o;if(b.children&&l[0]!==R)for(f=(r?b.children.length:-1)+n,m=g.concat(b);f>-1&&f<b.children.length;){let y=b.children[f];if(h=c(y,f,m)(),h[0]===k)return h;f=typeof h[1]=="number"?h[1]:f+n}}return l}}}function se(e){return Array.isArray(e)?e:typeof e=="number"?[E,e]:e==null?w:[e]}function C(e,t,i,r){let s,a,n;typeof t=="function"&&typeof i!="function"?(a=void 0,n=t,s=i):(a=t,n=i,s=r),A(e,a,c,s);function c(o,p){let g=p[p.length-1],d=g?g.children.indexOf(o):void 0;return n(o,d,g)}}var B=/!?\[\[[^\]]+\]\]/g,re=/!?\[\[([^\|\]]+)(?:\s*\|\s*([^\|\]]+))?\]\]/,ae=({basePath:e,classNames:t,filePathPrefix:i,getVaultItemByLabelSlug:r,slugify:s})=>{let{linkClassName:a,imageClassName:n,errorClassName:c,mdClassName:o}=t;return(p,g,d)=>{if(!p.value||typeof p.value!="string"||!d||g===void 0||!p.value?.match(B)?.length)return;let O=[...p.value.matchAll(B)],l=[],h=0;for(let f of O){h!==f.index&&l.push({type:"text",value:p.value.slice(h,f.index)});let m=f[0].match(re);if(!m){l.push({type:"text",value:f[0]}),h=f.index+f[0].length;continue}let b=m[1].indexOf("#"),y=b!==-1?m[1].slice(b+1).trim():"",W=y.startsWith("^"),x=r(s(b!==-1?m[1].slice(0,b).trim():m[1].trim())),T=W?`${x?.label} > ${y.slice(1)}`:m[1],F=`${i}${x?.filepath}`.replace(/\/\//g,"/");if(!x)console.error(x),l.push({type:"text",value:`"${m[1]}" could not be found`,data:{hName:"span",hProperties:{className:c}}});else if(m[0].startsWith("!"))x.extension==="md"?d.data={...d.data,hName:"div",hProperties:{className:o,options:m[2]??void 0,"data-file-id":x.id,"data-hash-params":s(y)}}:l.push({type:"image",url:F,alt:T,data:{hProperties:{className:n,options:m[2]??void 0,src:F,"data-ext":x.extension,"data-label":x.label}}});else{let U=y?`#${s(y)}`:"";l.push({type:"link",url:F+U,title:m[2]??T,data:{hProperties:{className:a,options:m[2]??void 0,src:F,"data-ext":x.extension,"data-hash-params":s(y),"data-label":x.label}},children:[{type:"text",value:m[2]??T}]})}h=f.index+f[0].length}h<p.value.length&&l.push({type:"text",value:p.value.slice(h)}),typeof g=="number"&&d.children?d.children.splice(g,1,...l):d.children=l}},L=ae;var D=/^\[\!\s*([\w-]+)\s*\]([-+]?)/,oe=({classNames:e})=>{let{calloutClassName:t,calloutIsFoldableClassName:i,calloutTitleClassName:r}=e;return s=>{if(!Array.isArray(s.children)||s.children.length===0)return;let a=s.children.find(l=>l.type==="paragraph");if(!a||a.children.length===0)return;let n=a.children.find(l=>l.type==="text");if(!n||typeof n.value!="string"||n.value.trim()==="")return;let c=D.exec(n.value);if(!c)return;let o=c[1].toLowerCase(),p=c[2]||"",g=p!=="",d=p==="-";n.value=n.value.replace(D,"").trim();let O=n.value||o;s.data??={},s.data.hProperties={...s.data.hProperties,"data-callout":o,"data-initial-folded":String(d),className:[t,g?i:""]},a.data??={},a.data.hProperties||(a.data.hProperties={}),a.data.hProperties={...a.data.hProperties,className:[r],"data-callout":o}}},j=oe;var ne=/==([^=]+)==/gm,le=({classNames:e})=>{let{hilightClassName:t}=e;return(i,r,s)=>{if(!i.value||typeof i.value!="string"||!s||r===void 0)return;let a=[...i.value.matchAll(ne)];if(a.length===0)return;let n=[],c=0;for(let o of a)c!==o.index&&n.push({type:"text",value:i.value.slice(c,o.index)}),n.push({type:"text",value:o[1],data:{hName:"mark",hProperties:{className:t}}}),c=o.index+o[0].length;c<i.value.length&&n.push({type:"text",value:i.value.slice(c)}),s.children&&s.children.splice(r,1,...n)}},$=le;var S={basePath:"",classNames:{calloutClassName:"callout",calloutIsFoldableClassName:"foldable",calloutTitleClassName:"callout-title",errorClassName:"obsidian-md-error",hilightClassName:"obsidian-hilight",imageClassName:"obsidian-img",linkClassName:"obsidian-link",mdClassName:"obsidian-md-embed "},filePathPrefix:"",slugify:I,getVaultItemByLabelSlug:e=>N.getFileForLabelSlug(e)},ue=(e={})=>{let t={...S,...e,classNames:{...S.classNames,...e?.classNames}},i=L({...t}),r=$({...t}),s=j({...t});return a=>{C(a,"text",r),C(a,"blockquote",s),C(a,"text",i)}},ce=ue;export{S as DefaultRemarkObsidiousOptions,N as ObsidiousVault,_ as ObsidiousVaultImageFiletypes,J as hash,ce as remarkObsidious,I as slugify,G as slugifyFilepath};
//# sourceMappingURL=index.js.map
