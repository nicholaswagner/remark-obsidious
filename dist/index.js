var p=null,K=t=>(p||(p=t),T),N=t=>p&&p.files[t]||null,M=t=>p?N(p.idsByWebPath[t]):null,U=t=>p?N(p.idsByLabelSlug[t]):null,X=()=>p?p.imageIds.map(N).filter(t=>t!==null):[],z=()=>p?p.fileTree:[],H=t=>(p?p.idsByExtension[t]||[]:[]).map(N).filter(i=>i!==null),T={files:{},fileTree:[],idsByExtension:{},idsByLabelSlug:{},idsByWebPath:{},imageIds:[],stats:{},initialize:K,getAllImageFiles:X,getFileForId:N,getFileForLabelSlug:U,getFileForWebPathSlug:M,getFilesByExtension:H,getFileTree:z,...p||{}},q=T;var I=function(t){if(t==null)return Q;if(typeof t=="function")return v(t);if(typeof t=="object")return Array.isArray(t)?Y(t):G(t);if(typeof t=="string")return J(t);throw new Error("Expected function, string, or object as test")};function Y(t){let e=[],i=-1;for(;++i<t.length;)e[i]=I(t[i]);return v(r);function r(...s){let o=-1;for(;++o<e.length;)if(e[o].apply(this,s))return!0;return!1}}function G(t){let e=t;return v(i);function i(r){let s=r,o;for(o in t)if(s[o]!==e[o])return!1;return!0}}function J(t){return v(e);function e(i){return i&&i.type===t}}function v(t){return e;function e(i,r,s){return!!(Z(i)&&t.call(this,i,typeof r=="number"?r:void 0,s||void 0))}}function Q(){return!0}function Z(t){return t!==null&&typeof t=="object"&&"type"in t}var B=[],V=!0,E=!1,A="skip";function R(t,e,i,r){let s;typeof e=="function"&&typeof i!="function"?(r=i,i=e):s=e;let o=I(s),n=r?-1:1;u(t,void 0,[])();function u(a,d,m){let f=a&&typeof a=="object"?a:{};if(typeof f.type=="string"){let l=typeof f.tagName=="string"?f.tagName:typeof f.name=="string"?f.name:void 0;Object.defineProperty(O,"name",{value:"node ("+(a.type+(l?"<"+l+">":""))+")"})}return O;function O(){let l=B,g,c,h;if((!e||o(a,d,m[m.length-1]||void 0))&&(l=tt(i(a,m)),l[0]===E))return l;if("children"in a&&a.children){let x=a;if(x.children&&l[0]!==A)for(c=(r?x.children.length:-1)+n,h=m.concat(x);c>-1&&c<x.children.length;){let y=x.children[c];if(g=u(y,c,h)(),g[0]===E)return g;c=typeof g[1]=="number"?g[1]:c+n}}return l}}}function tt(t){return Array.isArray(t)?t:typeof t=="number"?[V,t]:t==null?B:[t]}function C(t,e,i,r){let s,o,n;typeof e=="function"&&typeof i!="function"?(o=void 0,n=e,s=i):(o=e,n=i,s=r),R(t,o,u,s);function u(a,d){let m=d[d.length-1],f=m?m.children.indexOf(a):void 0;return n(a,f,m)}}var P=t=>t.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/[^a-z0-9\/]+/g,"-").replace(/_+/g,"_").replace(/^_+|_+$/g,""),k=(t,e)=>P(e==="md"?t.replace(/\.md$/,""):t);function S(t){for(var e=0,i,r=0,s=t.length;s>=4;++r,s-=4)i=t.charCodeAt(r)&255|(t.charCodeAt(++r)&255)<<8|(t.charCodeAt(++r)&255)<<16|(t.charCodeAt(++r)&255)<<24,i=(i&65535)*1540483477+((i>>>16)*59797<<16),i^=i>>>24,e=(i&65535)*1540483477+((i>>>16)*59797<<16)^(e&65535)*1540483477+((e>>>16)*59797<<16);switch(s){case 3:e^=(t.charCodeAt(r+2)&255)<<16;case 2:e^=(t.charCodeAt(r+1)&255)<<8;case 1:e^=t.charCodeAt(r)&255,e=(e&65535)*1540483477+((e>>>16)*59797<<16)}return e^=e>>>13,e=(e&65535)*1540483477+((e>>>16)*59797<<16),((e^e>>>15)>>>0).toString(36)}var L=/!?\[\[[^\]]+\]\]/g,et=/!?\[\[([^\|\]]+)(?:\s*\|\s*([^\|\]]+))?\]\]/,it=({basePath:t,classNames:e,filePathPrefix:i,getFileMetaForLabel:r,slugify:s})=>{let{linkClassName:o,imageClassName:n,errorClassName:u,embeddedMdClassName:a}=e;return(d,m,f)=>{if(!d.value||typeof d.value!="string"||!f||m===void 0||!d.value?.match(L)?.length)return;let O=[...d.value.matchAll(L)],l=[],g=0;for(let c of O){g!==c.index&&l.push({type:"text",value:d.value.slice(g,c.index)});let h=c[0].match(et);if(!h){l.push({type:"text",value:c[0]}),g=c.index+c[0].length;continue}let x=h[1].indexOf("#"),y=x!==-1?h[1].slice(x+1):"",$=y.startsWith("^"),b=r(s(x!==-1?h[1].slice(0,x):h[1])),F=$?`${b?.label} > ${y.slice(1)}`:h[1];if(!b)console.error(b),l.push({type:"text",value:`"${h[1]}" could not be found`,data:{hName:"span",hProperties:{className:u}}});else if(h[0].startsWith("!")){let w=b.filepath;b.extension==="md"?f.data={...f.data,hName:"div",hProperties:{className:a,options:h[2]??void 0,"data-file-id":b.id,"data-hash-params":s(y)}}:l.push({type:"image",url:w,alt:F,data:{hProperties:{className:n,options:h[2]??void 0,src:i+w,"data-ext":b.extension,"data-hash-params":s(y),"data-label":b.label}}})}else l.push({type:"link",url:t+k(b.filepath,b.extension)+y,title:F,data:{hProperties:{className:o,options:h[2]??void 0,src:i+b.filepath,"data-ext":b.extension,"data-hash-params":s(y),"data-label":b.label}},children:[{type:"text",value:F}]});g=c.index+c[0].length}g<d.value.length&&l.push({type:"text",value:d.value.slice(g)}),typeof m=="number"&&f.children?f.children.splice(m,1,...l):f.children=l}},D=it;var _=/^\[\!\s*([\w-]+)\s*\]([-+]?)/,st=({classNames:t})=>{let{calloutClassName:e,calloutIsFoldableClassName:i,calloutTitleClassName:r}=t;return s=>{if(!Array.isArray(s.children)||s.children.length===0)return;let o=s.children.find(l=>l.type==="paragraph");if(!o||o.children.length===0)return;let n=o.children.find(l=>l.type==="text");if(!n||typeof n.value!="string"||n.value.trim()==="")return;let u=_.exec(n.value);if(!u)return;let a=u[1].toLowerCase(),d=u[2]||"",m=d!=="",f=d==="-";n.value=n.value.replace(_,"").trim();let O=n.value||a;s.data??={},s.data.hProperties={...s.data.hProperties,"data-callout":a,"data-initial-folded":String(f),"data-title":O,className:[e,m?i:""]},o.data??={},o.data.hProperties||(o.data.hProperties={}),o.data.hProperties={...o.data.hProperties,className:[r],"data-callout":a,"data-title":O}}},j=st;var rt=/==([^=]+)==/gm,ot=({classNames:t})=>{let{hilightClassName:e}=t;return(i,r,s)=>{if(!i.value||typeof i.value!="string"||!s||r===void 0)return;let o=[...i.value.matchAll(rt)];if(o.length===0)return;let n=[],u=0;for(let a of o)u!==a.index&&n.push({type:"text",value:i.value.slice(u,a.index)}),n.push({type:"text",value:a[1],data:{hName:"span",hProperties:{className:e}}}),u=a.index+a[0].length;u<i.value.length&&n.push({type:"text",value:i.value.slice(u)}),s.children&&s.children.splice(r,1,...n)}},W=ot;var at={basePath:"/",classNames:{calloutClassName:"callout",calloutIsFoldableClassName:"foldable",calloutTitleClassName:"callout-title",errorClassName:"obsidian-md-error",hilightClassName:"obsidian-hilight",imageClassName:"obsidian-img",linkClassName:"obsidian-link",embeddedMdClassName:"obsidian-md-embed "},filePathPrefix:"/vault/",slugify:P,getFileMetaForLabel:t=>null},nt=t=>{let e={...at,...t},i=D({...e}),r=j({...e}),s=W({...e});return o=>{C(o,"blockquote",r),C(o,"text",s),C(o,"text",i)}},lt=nt;export{q as Obsidious,lt as RemarkObsidious,S as hash,P as slugify,k as slugifyFilepath};
//# sourceMappingURL=index.js.map
