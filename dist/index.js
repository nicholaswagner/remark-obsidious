var z=["avif","bmp","gif","jpeg","jpg","png","svg","webp"],c=null,H=e=>(c||(c=e),N),I=e=>c&&c.files[e]||null,K=e=>c?I(c.idsByWebPath[e]):null,X=e=>c?I(c.idsByLabelSlug[e]):null,M=()=>c?Object.values(c.files):[],Y=()=>c?c.imageIds.map(I).filter(e=>e!==null):[],q=()=>c?c.fileTree:[],G=e=>(c?c.idsByExtension[e]||[]:[]).map(I).filter(i=>i!==null),N={initialize:H,getAllFiles:M,getAllImageFiles:Y,getFileForId:I,getFileForLabelSlug:X,getFileForWebPathSlug:K,getFilesByExtension:G,getFileTree:q,...c||{}};var P=e=>e.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/[^a-z0-9\/]+/g,"-").replace(/_+/g,"_").replace(/^_+|_+$/g,""),J=(e,t)=>P(t==="md"?e.replace(/\.md$/,""):e);function Q(e){for(var t=0,i,r=0,s=e.length;s>=4;++r,s-=4)i=e.charCodeAt(r)&255|(e.charCodeAt(++r)&255)<<8|(e.charCodeAt(++r)&255)<<16|(e.charCodeAt(++r)&255)<<24,i=(i&65535)*1540483477+((i>>>16)*59797<<16),i^=i>>>24,t=(i&65535)*1540483477+((i>>>16)*59797<<16)^(t&65535)*1540483477+((t>>>16)*59797<<16);switch(s){case 3:t^=(e.charCodeAt(r+2)&255)<<16;case 2:t^=(e.charCodeAt(r+1)&255)<<8;case 1:t^=e.charCodeAt(r)&255,t=(t&65535)*1540483477+((t>>>16)*59797<<16)}return t^=t>>>13,t=(t&65535)*1540483477+((t>>>16)*59797<<16),((t^t>>>15)>>>0).toString(36)}var F=function(e){if(e==null)return ie;if(typeof e=="function")return v(e);if(typeof e=="object")return Array.isArray(e)?Z(e):ee(e);if(typeof e=="string")return te(e);throw new Error("Expected function, string, or object as test")};function Z(e){let t=[],i=-1;for(;++i<e.length;)t[i]=F(e[i]);return v(r);function r(...s){let a=-1;for(;++a<t.length;)if(t[a].apply(this,s))return!0;return!1}}function ee(e){let t=e;return v(i);function i(r){let s=r,a;for(a in e)if(s[a]!==t[a])return!1;return!0}}function te(e){return v(t);function t(i){return i&&i.type===e}}function v(e){return t;function t(i,r,s){return!!(se(i)&&e.call(this,i,typeof r=="number"?r:void 0,s||void 0))}}function ie(){return!0}function se(e){return e!==null&&typeof e=="object"&&"type"in e}var w=[],k=!0,V=!1,E="skip";function R(e,t,i,r){let s;typeof t=="function"&&typeof i!="function"?(r=i,i=t):s=t;let a=F(s),u=r?-1:1;f(e,void 0,[])();function f(l,p,h){let d=l&&typeof l=="object"?l:{};if(typeof d.type=="string"){let o=typeof d.tagName=="string"?d.tagName:typeof d.name=="string"?d.name:void 0;Object.defineProperty(x,"name",{value:"node ("+(l.type+(o?"<"+o+">":""))+")"})}return x;function x(){let o=w,g,n,m;if((!t||a(l,p,h[h.length-1]||void 0))&&(o=re(i(l,h)),o[0]===V))return o;if("children"in l&&l.children){let b=l;if(b.children&&o[0]!==E)for(n=(r?b.children.length:-1)+u,m=h.concat(b);n>-1&&n<b.children.length;){let O=b.children[n];if(g=f(O,n,m)(),g[0]===V)return g;n=typeof g[1]=="number"?g[1]:n+u}}return o}}}function re(e){return Array.isArray(e)?e:typeof e=="number"?[k,e]:e==null?w:[e]}function C(e,t,i,r){let s,a,u;typeof t=="function"&&typeof i!="function"?(a=void 0,u=t,s=i):(a=t,u=i,s=r),R(e,a,f,s);function f(l,p){let h=p[p.length-1],d=h?h.children.indexOf(l):void 0;return u(l,d,h)}}var B=/!?\[\[[^\]]+\]\]/g,ae=/!?\[\[([^\|\]]+)(?:\s*\|\s*([^\|\]]+))?\]\]/,ne=({basePath:e,classNames:t,filePathPrefix:i,getVaultItemByLabelSlug:r,slugify:s})=>{let{linkClassName:a,imageClassName:u,errorClassName:f,mdClassName:l}=t;return(p,h,d)=>{if(!p.value||typeof p.value!="string"||!d||h===void 0||!p.value?.match(B)?.length)return;let x=[...p.value.matchAll(B)],o=[],g=0;for(let n of x){g!==n.index&&o.push({type:"text",value:p.value.slice(g,n.index)});let m=n[0].match(ae);if(!m){o.push({type:"text",value:n[0]}),g=n.index+n[0].length;continue}let b=m[1].indexOf("#"),O=b!==-1?m[1].slice(b+1).trim():"",W=O.startsWith("^"),U=s(b!==-1?m[1].slice(0,b).trim():m[1].trim()),y=r(U),A=(W?`${y?.label} > ${O.slice(1)}`:m[1]).trim(),S=`${i}${y?.filepath}`.replace(/\/\//g,"/");if(!y)console.error(y),o.push({type:"text",value:`"${m[1]}" could not be found`,data:{hName:"span",hProperties:{className:f}}});else if(m[0].startsWith("!"))y.extension==="md"?d.data={...d.data,hName:"div",hProperties:{className:l,"data-file-id":y.id,"data-hash-params":s(O)}}:o.push({type:"image",url:S,alt:A,data:{hProperties:{className:u,"data-ext":y.extension,"data-label":y.label,"data-meta":m[2]??void 0}}});else{let _=O?`#${s(O)}`:"";o.push({type:"link",url:S+_,data:{hProperties:{className:a,"data-ext":y.extension,"data-hash-params":s(O),"data-label":y.label}},children:[{type:"text",value:m[2]??A}]})}g=n.index+n[0].length}g<p.value.length&&o.push({type:"text",value:p.value.slice(g)}),typeof h=="number"&&d.children?d.children.splice(h,1,...o):d.children=o}},L=ne;var D=/^\[\!\s*([\w-]+)\s*\]([-+]?)/,le=({classNames:e})=>{let{calloutClassName:t,calloutIsFoldableClassName:i,calloutTitleClassName:r}=e;return s=>{if(!Array.isArray(s.children)||s.children.length===0)return;let a=s.children.find(n=>n.type==="paragraph");if(!a||a.children.length===0)return;let u=a.children[0];if(!u||!("value"in u)||typeof u.value!="string")return;let f=D.exec(u.value);if(!f)return;let l=f[1].toLowerCase(),p=f[2]||"",h=p!=="",d=p==="-";u.value=u.value.replace(D,"").trim();let x=[],o=[],g=!1;for(let n of a.children)if(g)o.push(n);else if(n.type==="text"&&n.value.includes(`
`)){let[m,b]=n.value.split(/\r?\n/,2);m.trim()&&x.push({...n,value:m.trim()}),b.trim()&&o.push({...n,value:b.trim()}),g=!0}else x.push(n);x.length===0&&(x=[{type:"text",value:l}]),a.children=x,o.length>0&&s.children.splice(1,0,{type:"paragraph",children:o}),s.data??={},s.data.hProperties={...s.data.hProperties,"data-callout":l,"data-initial-folded":String(d),className:[t,h?i:""]},a.data??={},a.data.hProperties={className:[r],"data-callout":l}}},j=le;var oe=/==([^=]+)==/gm,ue=({classNames:e})=>{let{hilightClassName:t}=e;return(i,r,s)=>{if(!i.value||typeof i.value!="string"||!s||r===void 0)return;let a=[...i.value.matchAll(oe)];if(a.length===0)return;let u=[],f=0;for(let l of a)f!==l.index&&u.push({type:"text",value:i.value.slice(f,l.index)}),u.push({type:"text",value:l[1],data:{hName:"mark",hProperties:{className:t}}}),f=l.index+l[0].length;f<i.value.length&&u.push({type:"text",value:i.value.slice(f)}),s.children&&s.children.splice(r,1,...u)}},$=ue;var T={basePath:"",classNames:{calloutClassName:"callout",calloutIsFoldableClassName:"foldable",calloutTitleClassName:"callout-title",errorClassName:"obsidian-md-error",hilightClassName:"obsidian-hilight",imageClassName:"obsidian-img",linkClassName:"obsidian-link",mdClassName:"obsidian-md-embed "},filePathPrefix:"",slugify:P,getVaultItemByLabelSlug:e=>N.getFileForLabelSlug(e)},ce=(e={})=>{let t={...T,...e,classNames:{...T.classNames,...e?.classNames}},i=L({...t}),r=$({...t}),s=j({...t});return a=>{C(a,"text",r),C(a,"text",i),C(a,"blockquote",s)}},fe=ce;export{T as DefaultRemarkObsidiousOptions,N as ObsidiousVault,z as ObsidiousVaultImageFiletypes,Q as hash,fe as remarkObsidious,P as slugify,J as slugifyFilepath};
//# sourceMappingURL=index.js.map
