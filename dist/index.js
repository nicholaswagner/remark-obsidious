var z=["avif","bmp","gif","jpeg","jpg","png","svg","webp"],u=null,K=e=>(u||(u=e),N),P=e=>u&&u.files[e]||null,X=e=>u?P(u.idsByWebPath[e]):null,H=e=>u?P(u.idsByLabelSlug[e]):null,M=()=>u?Object.values(u.files):[],q=()=>u?u.imageIds.map(P).filter(e=>e!==null):[],Y=()=>u?u.fileTree:[],G=e=>(u?u.idsByExtension[e]||[]:[]).map(P).filter(i=>i!==null),N={initialize:K,getAllFiles:M,getAllImageFiles:q,getFileForId:P,getFileForLabelSlug:H,getFileForWebPathSlug:X,getFilesByExtension:G,getFileTree:Y,...u||{}};var I=e=>e.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/[^a-z0-9\/]+/g,"-").replace(/_+/g,"_").replace(/^_+|_+$/g,""),J=(e,t)=>I(t==="md"?e.replace(/\.md$/,""):e);function Q(e){for(var t=0,i,r=0,s=e.length;s>=4;++r,s-=4)i=e.charCodeAt(r)&255|(e.charCodeAt(++r)&255)<<8|(e.charCodeAt(++r)&255)<<16|(e.charCodeAt(++r)&255)<<24,i=(i&65535)*1540483477+((i>>>16)*59797<<16),i^=i>>>24,t=(i&65535)*1540483477+((i>>>16)*59797<<16)^(t&65535)*1540483477+((t>>>16)*59797<<16);switch(s){case 3:t^=(e.charCodeAt(r+2)&255)<<16;case 2:t^=(e.charCodeAt(r+1)&255)<<8;case 1:t^=e.charCodeAt(r)&255,t=(t&65535)*1540483477+((t>>>16)*59797<<16)}return t^=t>>>13,t=(t&65535)*1540483477+((t>>>16)*59797<<16),((t^t>>>15)>>>0).toString(36)}var F=function(e){if(e==null)return ie;if(typeof e=="function")return V(e);if(typeof e=="object")return Array.isArray(e)?Z(e):ee(e);if(typeof e=="string")return te(e);throw new Error("Expected function, string, or object as test")};function Z(e){let t=[],i=-1;for(;++i<e.length;)t[i]=F(e[i]);return V(r);function r(...s){let a=-1;for(;++a<t.length;)if(t[a].apply(this,s))return!0;return!1}}function ee(e){let t=e;return V(i);function i(r){let s=r,a;for(a in e)if(s[a]!==t[a])return!1;return!0}}function te(e){return V(t);function t(i){return i&&i.type===e}}function V(e){return t;function t(i,r,s){return!!(se(i)&&e.call(this,i,typeof r=="number"?r:void 0,s||void 0))}}function ie(){return!0}function se(e){return e!==null&&typeof e=="object"&&"type"in e}var w=[],k=!0,v=!1,T="skip";function E(e,t,i,r){let s;typeof t=="function"&&typeof i!="function"?(r=i,i=t):s=t;let a=F(s),l=r?-1:1;c(e,void 0,[])();function c(o,m,p){let d=o&&typeof o=="object"?o:{};if(typeof d.type=="string"){let n=typeof d.tagName=="string"?d.tagName:typeof d.name=="string"?d.name:void 0;Object.defineProperty(O,"name",{value:"node ("+(o.type+(n?"<"+n+">":""))+")"})}return O;function O(){let n=w,h,f,g;if((!t||a(o,m,p[p.length-1]||void 0))&&(n=re(i(o,p)),n[0]===v))return n;if("children"in o&&o.children){let b=o;if(b.children&&n[0]!==T)for(f=(r?b.children.length:-1)+l,g=p.concat(b);f>-1&&f<b.children.length;){let y=b.children[f];if(h=c(y,f,g)(),h[0]===v)return h;f=typeof h[1]=="number"?h[1]:f+l}}return n}}}function re(e){return Array.isArray(e)?e:typeof e=="number"?[k,e]:e==null?w:[e]}function C(e,t,i,r){let s,a,l;typeof t=="function"&&typeof i!="function"?(a=void 0,l=t,s=i):(a=t,l=i,s=r),E(e,a,c,s);function c(o,m){let p=m[m.length-1],d=p?p.children.indexOf(o):void 0;return l(o,d,p)}}var B=/!?\[\[[^\]]+\]\]/g,ae=/!?\[\[([^\|\]]+)(?:\s*\|\s*([^\|\]]+))?\]\]/,oe=({basePath:e,classNames:t,filePathPrefix:i,getVaultItemByLabelSlug:r,slugify:s})=>{let{linkClassName:a,imageClassName:l,errorClassName:c,mdClassName:o}=t;return(m,p,d)=>{if(!m.value||typeof m.value!="string"||!d||p===void 0||!m.value?.match(B)?.length)return;let O=[...m.value.matchAll(B)],n=[],h=0;for(let f of O){h!==f.index&&n.push({type:"text",value:m.value.slice(h,f.index)});let g=f[0].match(ae);if(!g){n.push({type:"text",value:f[0]}),h=f.index+f[0].length;continue}let b=g[1].indexOf("#"),y=b!==-1?g[1].slice(b+1).trim():"",W=y.startsWith("^"),U=s(b!==-1?g[1].slice(0,b).trim():g[1].trim()),x=r(U),A=(W?`${x?.label} > ${y.slice(1)}`:g[1]).trim(),S=`${i}${x?.filepath}`.replace(/\/\//g,"/");if(!x)console.error(x),n.push({type:"text",value:`"${g[1]}" could not be found`,data:{hName:"span",hProperties:{className:c}}});else if(g[0].startsWith("!"))x.extension==="md"?d.data={...d.data,hName:"div",hProperties:{className:o,"data-file-id":x.id,"data-hash-params":s(y)}}:n.push({type:"image",url:S,alt:A,data:{hProperties:{className:l,"data-ext":x.extension,"data-label":x.label,"data-meta":g[2]??void 0}}});else{let _=y?`#${s(y)}`:"";n.push({type:"link",url:S+_,data:{hProperties:{className:a,"data-ext":x.extension,"data-hash-params":s(y),"data-label":x.label}},children:[{type:"text",value:g[2]??A}]})}h=f.index+f[0].length}h<m.value.length&&n.push({type:"text",value:m.value.slice(h)}),typeof p=="number"&&d.children?d.children.splice(p,1,...n):d.children=n}},L=oe;var D=/^\[\!\s*([\w-]+)\s*\]([-+]?)/,le=({classNames:e})=>{let{calloutClassName:t,calloutIsFoldableClassName:i,calloutTitleClassName:r}=e;return s=>{if(!Array.isArray(s.children)||s.children.length===0)return;let a=s.children.find(n=>n.type==="paragraph");if(!a||a.children.length===0)return;let l=a.children.find(n=>n.type==="text");if(!l||typeof l.value!="string"||l.value.trim()==="")return;let c=D.exec(l.value);if(!c)return;let o=c[1].toLowerCase(),m=c[2]||"",p=m!=="",d=m==="-";l.value=l.value.replace(D,"").trim();let O=l.value||o;s.data??={},s.data.hProperties={...s.data.hProperties,"data-callout":o,"data-initial-folded":String(d),className:[t,p?i:""]},a.data??={},a.data.hProperties||(a.data.hProperties={}),a.data.hProperties={...a.data.hProperties,className:[r],"data-callout":o}}},j=le;var ne=/==([^=]+)==/gm,ue=({classNames:e})=>{let{hilightClassName:t}=e;return(i,r,s)=>{if(!i.value||typeof i.value!="string"||!s||r===void 0)return;let a=[...i.value.matchAll(ne)];if(a.length===0)return;let l=[],c=0;for(let o of a)c!==o.index&&l.push({type:"text",value:i.value.slice(c,o.index)}),l.push({type:"text",value:o[1],data:{hName:"mark",hProperties:{className:t}}}),c=o.index+o[0].length;c<i.value.length&&l.push({type:"text",value:i.value.slice(c)}),s.children&&s.children.splice(r,1,...l)}},$=ue;var R={basePath:"",classNames:{calloutClassName:"callout",calloutIsFoldableClassName:"foldable",calloutTitleClassName:"callout-title",errorClassName:"obsidian-md-error",hilightClassName:"obsidian-hilight",imageClassName:"obsidian-img",linkClassName:"obsidian-link",mdClassName:"obsidian-md-embed "},filePathPrefix:"",slugify:I,getVaultItemByLabelSlug:e=>N.getFileForLabelSlug(e)},ce=(e={})=>{let t={...R,...e,classNames:{...R.classNames,...e?.classNames}},i=L({...t}),r=$({...t}),s=j({...t});return a=>{C(a,"text",r),C(a,"blockquote",s),C(a,"text",i)}},de=ce;export{R as DefaultRemarkObsidiousOptions,N as ObsidiousVault,z as ObsidiousVaultImageFiletypes,Q as hash,de as remarkObsidious,I as slugify,J as slugifyFilepath};
//# sourceMappingURL=index.js.map
